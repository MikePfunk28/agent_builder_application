# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Project Overview

This is an Agent Builder Application that creates production-ready AI agents using the strandsagents SDK. The application provides a visual interface for building, configuring, and deploying AI agents with various tools and deployment options.

## Tech Stack

- **Frontend**: React + TypeScript + Vite + TailwindCSS + Framer Motion
- **Backend**: Convex (serverless backend platform)
- **Authentication**: Convex Auth (Anonymous auth by default)
- **Agent Framework**: strandsagents SDK with agentcore
- **Deployment Targets**: AWS, Docker, Ollama

## Common Development Commands

### Local Development
```powershell
# Start both frontend (Vite) and backend (Convex)
npm run dev

# Start frontend only (opens browser automatically)
npm run dev:frontend

# Start backend only
npm run dev:backend

# Build for production
npm run build

# Lint and type-check
npm run lint

# Open Convex dashboard
npx convex dashboard
```

### Convex Management
```powershell
# Deploy to production
npx convex deploy

# View deployment logs
npx convex logs

# Run Convex functions locally
npx convex dev
```

## Architecture

### Frontend Structure (`/src`)
- **App.tsx**: Main application component with routing between Dashboard and Builder views
- **components/AgentBuilder.tsx**: Multi-step wizard for agent creation
  - Basic Info → Model & Prompt → Tools → Deploy
- **components/AgentDashboard.tsx**: List and manage created agents
- **components/ModelSelector.tsx**: Model selection interface
- **components/ToolSelector.tsx**: Tool configuration interface
- **components/CodePreview.tsx**: Generated code preview with syntax highlighting

### Backend Structure (`/convex`)
- **schema.ts**: Database schema definitions
  - `agents`: Stores agent configurations and generated code
  - `templates`: Pre-built agent templates
- **agents.ts**: CRUD operations for agent management
- **codeGenerator.ts**: Core logic for generating strandsagents code
  - Generates imports based on tools and deployment type
  - Creates tool classes (WebSearch, FileOperations, Database, etc.)
  - Generates agent class with @agent decorator
  - Creates deployment configurations (AWS SAM, Docker, Ollama)
- **templates.ts**: Pre-built agent template management
- **auth.ts**: Authentication configuration
- **http.ts**: HTTP routes and API endpoints

## Agent Generation Flow

1. User configures agent through multi-step wizard
2. Configuration includes:
   - Name and description
   - Model selection (Claude, GPT-4, Llama, etc.)
   - System prompt with detailed instructions
   - Tools (web search, file operations, database, API client, data analysis)
   - Deployment type (AWS, Docker, Ollama)
3. `codeGenerator.ts` creates:
   - Python agent file with strandsagents decorators
   - Tool implementations
   - Deployment configurations
   - Docker setup if needed
4. Generated code is saved to database and downloadable

## Environment Configuration

### Required Environment Variables
```bash
# .env.local (auto-generated by Convex)
CONVEX_DEPLOY_KEY=<your-deploy-key>
CONVEX_DEPLOYMENT=dev:<deployment-name>
VITE_CONVEX_URL=https://<deployment-name>.convex.cloud
```

### Troubleshooting Environment Issues
If you see "No address provided to ConvexReactClient":
1. Ensure `.env.local` exists with `VITE_CONVEX_URL`
2. Restart the dev server: `npm run dev`
3. Verify the URL matches your Convex deployment

## Deployment

### To Convex Production
```powershell
# Deploy backend
npx convex deploy

# Build and deploy frontend to hosting provider
npm run build
# Deploy dist/ folder to Vercel/Netlify
```

### Agent Deployment Options
- **AWS**: Generates SAM CLI templates and Lambda functions
- **Docker**: Creates Dockerfile and docker-compose configurations
- **Ollama**: Local deployment with Ollama runtime

## Key Features

- Visual agent builder with step-by-step wizard
- Multiple LLM provider support (Bedrock, Anthropic, OpenAI, Ollama, etc.)
- Tool configuration with pip package management
- Generated code uses strandsagents @agent and @tool decorators
- Includes LangSmith logging and OpenTelemetry
- Memory management and code interpreter built-in
- Interleaved reasoning for Claude Sonnet models

## Important Notes

- Authentication uses Convex Auth with anonymous sign-in by default
- All agent code generation happens server-side in Convex actions
- Generated agents include comprehensive error handling and logging
- Docker configs include all necessary dependencies
- AWS deployments use SAM CLI for infrastructure management

## Use docs folder to get docs or to store docs
docs

## M:/strandsagents
Use this folder as well to look up implementations or examples.

## Use the strands agents tools repo
https://github.com/strands-agents/tools/tree/main/src/strands_tools/utils

There are more tools then I realized, there is a browser tool, a local_chromium_browser, agent_core_browser, and browser.  Then there is also multiple code interpreter files,  code_interpreter, and agent_core_code_interpreter.  I copied the python files to the docs folder and made them markdown files, so check them out there.
Lastly there is a utils folder with a few files I assume are tools as well, aws_util, console_util, data_util, detect_language.py, user_input.py, and generate_schema_util.py.  So check those out by going to the link on github or using the context7 mcp.

## Remove hardcoded api keys

## Docker - Sandbox - Testing Environment
Where is the dockerfile, needed to upload it onto bedrock or test it.  (remember the docs/manual_deploy.md that shows you how you could deploy it on aws, I filled it out with my information, but that shouldnt be used in the script you print out, only if they want to deploy it on aws, in which case we will.)  It should generate the dockerfile if we say it, and it should generate the script I gave you to manually insert it into aws.
Then if possible could we somehow run a docker container both as a sandbox for testing code and commands in a sandbox environment.  Then the model can be tested in it.

## Agent Decorator - Expand the decorator's functionality
Also remember to add to the @agent decorator, preprocess, and postprocess, maybe we could even add hooks you could call, or would that not make sense.  Then for a spell checking agent, file reading is important, maybe language detection, also maybe a grammar tool is needed, so you define a module for lang detection, and for grammar so it doesnt make mistakes on that and use the @tool decorator.  However that will mean we will need to use an agent to have that intelligent conversation with the user, in which case, we need the conversation manager for sliding context window, and use interleaved reasoning with claude.