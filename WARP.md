# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Project Overview

This is an Agent Builder Application that creates production-ready AI agents using the strandsagents SDK. The application provides a visual interface for building, configuring, and deploying AI agents with various tools and deployment options.

## Tech Stack

- **Frontend**: React + TypeScript + Vite + TailwindCSS + Framer Motion
- **Backend**: Convex (serverless backend platform)
- **Authentication**: Convex Auth (Anonymous auth by default)
- **Agent Framework**: strandsagents SDK with agentcore
- **Deployment Targets**: AWS, Docker, Ollama

## Common Development Commands

### Local Development
```powershell
# Start both frontend (Vite) and backend (Convex)
npm run dev

# Start frontend only (opens browser automatically)
npm run dev:frontend

# Start backend only
npm run dev:backend

# Build for production
npm run build

# Lint and type-check
npm run lint

# Open Convex dashboard
npx convex dashboard
```

### Convex Management
```powershell
# Deploy to production
npx convex deploy

# View deployment logs
npx convex logs

# Run Convex functions locally
npx convex dev
```

## Architecture

### Frontend Structure (`/src`)
- **App.tsx**: Main application component with routing between Dashboard and Builder views
- **components/AgentBuilder.tsx**: Multi-step wizard for agent creation
  - Basic Info → Model & Prompt → Tools → Deploy
- **components/AgentDashboard.tsx**: List and manage created agents
- **components/ModelSelector.tsx**: Model selection interface
- **components/ToolSelector.tsx**: Tool configuration interface
- **components/CodePreview.tsx**: Generated code preview with syntax highlighting

### Backend Structure (`/convex`)
- **schema.ts**: Database schema definitions
  - `agents`: Stores agent configurations and generated code
  - `templates`: Pre-built agent templates
- **agents.ts**: CRUD operations for agent management
- **codeGenerator.ts**: Core logic for generating strandsagents code
  - Generates imports based on tools and deployment type
  - Creates tool classes (WebSearch, FileOperations, Database, etc.)
  - Generates agent class with @agent decorator
  - Creates deployment configurations (AWS SAM, Docker, Ollama)
- **templates.ts**: Pre-built agent template management
- **auth.ts**: Authentication configuration
- **http.ts**: HTTP routes and API endpoints

## Agent Generation Flow

1. User configures agent through multi-step wizard
2. Configuration includes:
   - Name and description
   - Model selection (Claude, GPT-4, Llama, etc.)
   - System prompt with detailed instructions
   - Tools (web search, file operations, database, API client, data analysis)
   - Deployment type (AWS, Docker, Ollama)
3. `codeGenerator.ts` creates:
   - Python agent file with strandsagents decorators
   - Tool implementations
   - Deployment configurations
   - Docker setup if needed
4. Generated code is saved to database and downloadable

## Environment Configuration

### Required Environment Variables
```bash
# .env.local (auto-generated by Convex)
CONVEX_DEPLOY_KEY=<your-deploy-key>
CONVEX_DEPLOYMENT=dev:<deployment-name>
VITE_CONVEX_URL=https://<deployment-name>.convex.cloud
```

### Troubleshooting Environment Issues
If you see "No address provided to ConvexReactClient":
1. Ensure `.env.local` exists with `VITE_CONVEX_URL`
2. Restart the dev server: `npm run dev`
3. Verify the URL matches your Convex deployment

## Deployment

### To Convex Production
```powershell
# Deploy backend
npx convex deploy

# Build and deploy frontend to hosting provider
npm run build
# Deploy dist/ folder to Vercel/Netlify
```

### Agent Deployment Options
- **AWS**: Generates SAM CLI templates and Lambda functions
- **Docker**: Creates Dockerfile and docker-compose configurations
- **Ollama**: Local deployment with Ollama runtime

## Key Features

- Visual agent builder with step-by-step wizard
- Multiple LLM provider support (Bedrock, Anthropic, OpenAI, Ollama, etc.)
- Tool configuration with pip package management
- Generated code uses strandsagents @agent and @tool decorators
- Includes LangSmith logging and OpenTelemetry
- Memory management and code interpreter built-in
- Interleaved reasoning for Claude Sonnet models

## Important Notes

- Authentication uses Convex Auth with anonymous sign-in by default
- All agent code generation happens server-side in Convex actions
- Generated agents include comprehensive error handling and logging
- Docker configs include all necessary dependencies
- AWS deployments use SAM CLI for infrastructure management